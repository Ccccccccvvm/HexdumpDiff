<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HexDump Diff - ‰∫åËøõÂà∂Êï∞ÊçÆÂØπÊØîÂ∑•ÂÖ∑</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <header class="header">
            <h1>‚¨° HexDump Diff</h1>
            <div class="header-controls">
                <div class="bytes-per-row">
                    <label>ÊØèË°åÂ≠óËäÇÊï∞:</label>
                    <select id="bytesPerRow">
                        <option value="8">8</option>
                        <option value="16" selected>16</option>
                        <option value="32">32</option>
                    </select>
                </div>
                <button id="compareBtn" class="action-btn primary">‚ö° ÂØπÊØî</button>
                <button id="clearBtn" class="action-btn">Ê∏ÖÁ©∫</button>
                <button id="swapBtn" class="action-btn">‚áÑ ‰∫§Êç¢</button>
                <button id="toggleInputBtn" class="action-btn">‚Üï ÊäòÂè†ËæìÂÖ•</button>
                <button id="exportDiff" class="action-btn">ÂØºÂá∫Â∑ÆÂºÇ</button>
            </div>
        </header>

        <main class="main-content">
            <!-- ËæìÂÖ•Èù¢Êùø -->
            <div class="input-section">
                <div class="input-panel" id="dropZoneA">
                    <div class="input-header">
                        <span class="panel-label">Êï∞ÊçÆ A</span>
                        <select id="formatA" class="format-select">
                            <option value="auto">Ëá™Âä®</option>
                            <option value="hex">Hex</option>
                            <option value="hexdump">Hexdump</option>
                            <option value="c_array">CÊï∞ÁªÑ</option>
                            <option value="base64">Base64</option>
                        </select>
                        <span class="byte-count" id="byteCountA">0 Â≠óËäÇ</span>
                        <input type="file" id="fileInputA" class="hidden-file-input" style="display:none">
                        <button class="icon-btn" id="uploadBtnA" title="‰∏ä‰º†Êñá‰ª∂">üìÇ</button>
                        <button class="sample-btn" data-panel="A">Á§∫‰æã</button>
                    </div>
                    <div class="input-wrapper">
                        <textarea id="inputA" class="hex-input" placeholder="ÊîØÊåÅ: FF 00 AB | hexdump | CÊï∞ÁªÑ | Base64&#10;‰πüÂèØ‰ª•Áõ¥Êé•ÊãñÂÖ•Êñá‰ª∂"></textarea>
                        <div class="file-overlay" id="fileOverlayA">
                            <div class="file-info">
                                <span class="file-icon">üìÑ</span>
                                <span class="file-name" id="fileNameA"></span>
                                <button class="close-file-btn" data-panel="A">‚úï</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="input-panel" id="dropZoneB">
                    <div class="input-header">
                        <span class="panel-label">Êï∞ÊçÆ B</span>
                        <select id="formatB" class="format-select">
                            <option value="auto">Ëá™Âä®</option>
                            <option value="hex">Hex</option>
                            <option value="hexdump">Hexdump</option>
                            <option value="c_array">CÊï∞ÁªÑ</option>
                            <option value="base64">Base64</option>
                        </select>
                        <span class="byte-count" id="byteCountB">0 Â≠óËäÇ</span>
                        <input type="file" id="fileInputB" class="hidden-file-input" style="display:none">
                        <button class="icon-btn" id="uploadBtnB" title="‰∏ä‰º†Êñá‰ª∂">üìÇ</button>
                        <button class="sample-btn" data-panel="B">Á§∫‰æã</button>
                    </div>
                    <div class="input-wrapper">
                        <textarea id="inputB" class="hex-input" placeholder="ÊîØÊåÅ: FF 00 AB | hexdump | CÊï∞ÁªÑ | Base64&#10;‰πüÂèØ‰ª•Áõ¥Êé•ÊãñÂÖ•Êñá‰ª∂"></textarea>
                        <div class="file-overlay" id="fileOverlayB">
                            <div class="file-info">
                                <span class="file-icon">üìÑ</span>
                                <span class="file-name" id="fileNameB"></span>
                                <button class="close-file-btn" data-panel="B">‚úï</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÂØπÊØîÁªìÊûúÈù¢Êùø -->
            <div class="result-section" id="resultSection">
                <div class="result-header">
                    <span>ÂØπÊØîÁªìÊûú</span>
                    <div class="result-controls">
                        <button id="jumpToOffset" class="small-btn">Ë∑≥ËΩ¨ÂÅèÁßª</button>
                        <div class="search-box">
                            <input type="text" id="searchInput" placeholder="ÊêúÁ¥¢ (FF 00)">
                            <button id="searchBtn" class="small-btn">ÊêúÁ¥¢</button>
                            <button id="prevMatch" class="small-btn">‚óÄ</button>
                            <button id="nextMatch" class="small-btn">‚ñ∂</button>
                            <span id="matchInfo"></span>
                        </div>
                    </div>
                </div>
                
                <div class="diff-view">
                    <div class="panel left-panel">
                        <div class="panel-title">
                            <span>A</span>
                            <span class="file-size" id="sizeA"></span>
                        </div>
                        <div class="hex-container" id="hexContainerA">
                            <div class="hex-viewport" id="viewportA">
                                <div class="hex-content" id="contentA"></div>
                            </div>
                        </div>
                    </div>

                    <div class="diff-gutter" id="diffGutter">
                        <canvas id="diffCanvas"></canvas>
                    </div>

                    <div class="panel right-panel">
                        <div class="panel-title">
                            <span>B</span>
                            <span class="file-size" id="sizeB"></span>
                        </div>
                        <div class="hex-container" id="hexContainerB">
                            <div class="hex-viewport" id="viewportB">
                                <div class="hex-content" id="contentB"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <div class="stats">
                <span id="totalDiffs">Â∑ÆÂºÇ: 0 Â≠óËäÇ</span>
                <span id="currentOffset">ÂÅèÁßª: 0x00000000</span>
                <span id="selectionInfo"></span>
            </div>
            <div class="legend">
                <span class="legend-item"><span class="color-box added"></span>‰ªÖÂú®B‰∏≠</span>
                <span class="legend-item"><span class="color-box removed"></span>‰ªÖÂú®A‰∏≠</span>
                <span class="legend-item"><span class="color-box modified"></span>Â∑≤‰øÆÊîπ</span>
                <span class="legend-item"><span class="color-box match"></span>ÊêúÁ¥¢ÂåπÈÖç</span>
            </div>
        </footer>
    </div>

    <!-- Âè≥ÈîÆËèúÂçï -->
    <div id="contextMenu" class="context-menu">
        <div class="menu-item" id="copyHex">Â§çÂà∂ Hex</div>
        <div class="menu-item" id="copyHexNoSpace">Â§çÂà∂ Hex (Êó†Á©∫Ê†º)</div>
        <div class="menu-item" id="copyAscii">Â§çÂà∂ ASCII</div>
        <div class="menu-item" id="copyCArray">Â§çÂà∂ C Êï∞ÁªÑ</div>
        <div class="menu-separator"></div>
        <div class="menu-item" id="selectAll">ÂÖ®ÈÄâ</div>
    </div>

    <div id="jumpModal" class="modal">
        <div class="modal-content">
            <h3>Ë∑≥ËΩ¨Âà∞ÂÅèÁßªÂú∞ÂùÄ</h3>
            <input type="text" id="jumpOffset" placeholder="ËæìÂÖ•ÂçÅÂÖ≠ËøõÂà∂ÂÅèÁßª (Â¶Ç: 0x1000 Êàñ 1000)">
            <div class="modal-buttons">
                <button id="jumpConfirm">Ë∑≥ËΩ¨</button>
                <button id="jumpCancel">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <script src="hexdiff.js"></script>
</body>
</html>
